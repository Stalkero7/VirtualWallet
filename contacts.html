<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Alke Wallet - Agenda</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body class="bg-light d-flex align-items-center justify-content-center" style="min-height: 100vh;">

    <div class="container">
        <div class="row justify-content-center">
            
            <div class="col-md-5">
                <div class="card p-4 shadow">
                    <h4>Nuevo Contacto</h4>
                    <input type="text" id="nombre-c" class="form-control mb-2" placeholder="Nombre">
                    <input type="number" id="cuenta-c" class="form-control mb-3" placeholder="N° Cuenta">
                    <button id="add-c" class="btn btn-dark btn-block">Guardar</button>
                    <a href="index.html" class="btn btn-outline-secondary btn-block btn-link btn-primary">Volver</a>
                </div>
            </div>
            <div class="col-md-7">
                <h2>Contactos Guardados</h2>
                <ul id="lista-c" class="list-group shadow"></ul>
                <h3> <a href="send.html" class="btn btn-outline-secondary btn-block container-fluid">Enviar Dinero</a></h3>    
            </div>

        </div>
    </div>

</body>
    <script>
        $(document).ready(function() {
    function cargar() {
        let list = JSON.parse(localStorage.getItem('contactos')) || [];
        $('#lista-c').empty();
        list.forEach(c => $('#lista-c').append(`<li class="list-group-item d-flex justify-content-between align-items-center">
            ${c.nombre} 
            <span class="badge badge-primary badge-pill">CTA: ${c.cuenta}</span>
        </li>`));
    }

    $('#add-c').click(function() {
        // Obtenemos los valores y quitamos espacios sobrantes al inicio/final
        let n = $.trim($('#nombre-c').val());
        let c = $.trim($('#cuenta-c').val());

        // --- DEFINICIÓN DE REGEX ---
        // Solo letras, espacios y acentos
        const regexNombre = /^[a-zA-ZáéíóúÁÉÍÓÚñÑ ]+$/;
        // Solo números
        const regexCuenta = /^[0-9]+$/;

        // 1. Validar campos vacíos
        if (n === "" || c === "") {
            alert("⚠️ Por favor, completa todos los campos.");
            return;
        }

        // 2. Validar nombre (solo letras)
        if (!regexNombre.test(n)) {
            alert("❌ El nombre solo debe contener letras.");
            return;
        }

        // 3. Validar cuenta (solo números)
        if (!regexCuenta.test(c)) {
            alert("❌ El número de cuenta debe contener solo números.");
            return;
        }

        // Si todo está bien, guardamos
        let list = JSON.parse(localStorage.getItem('contactos')) || [];
        list.push({ nombre: n, cuenta: c });
        localStorage.setItem('contactos', JSON.stringify(list));
        
        alert("✅ Contacto guardado.");
        $('#nombre-c').val('');
        $('#cuenta-c').val('');
        cargar();
    });

    cargar();
});
    </script>
</body>
</html>